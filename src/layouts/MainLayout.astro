---
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import '../styles/tailwind.css';
import 'animate.css';
const { title } = Astro.props;
import MegaMenu from "../components/MegaMenu.astro";

import { apiDetails } from '../settings';



const res = await fetch(
  `${apiDetails.supabaseUrl}/rest/v1/overkategorier?select=id,name,underkategorier(id,name,menupunkter(id,name))`,
  {
    headers: {
      apikey: apiDetails.supabaseAnonKey,
      Authorization: `Bearer ${apiDetails.supabaseAnonKey}`,
    },
  }
);

const menuData = await res.json();

---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{Astro.props.title}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="">
    <header class="bg-blue-500">
      <Header></Header>
    </header>

	<pre>{JSON.stringify(menuData, null, 2)}</pre>
    <MegaMenu menuData={menuData} />

    <main class="p-sm">
      <slot />
    </main>

    <footer class="bg-blue-500">
      <Footer></Footer>
    </footer>
  </body>
</html>
